# TikTok User Data Analysis

ä¸€ä¸ªé«˜æ•ˆçš„ TikTok ç”¨æˆ·æ•°æ®åˆ†æå·¥å…·ï¼Œä½¿ç”¨ TikHub API æ‰¹é‡è·å–å’Œåˆ†æç”¨æˆ·èµ„æ–™ä¿¡æ¯ã€‚

## ğŸ“Š é¡¹ç›®ç‰¹ç‚¹

- âœ… **é«˜å¹¶å‘çˆ¬å–**: ä½¿ç”¨ asyncio å®ç°å¹¶å‘è¯·æ±‚ï¼Œé€Ÿåº¦æå‡ 10 å€
- âœ… **è‡ªåŠ¨é‡è¯•**: å¤±è´¥ç”¨æˆ·è‡ªåŠ¨é‡è¯•æœºåˆ¶
- âœ… **è¿›åº¦ç›‘æ§**: å®æ—¶æ˜¾ç¤ºçˆ¬å–è¿›åº¦å’Œé€Ÿåº¦
- âœ… **æ•°æ®å»é‡**: è‡ªåŠ¨åˆå¹¶å’Œå»é‡ç”¨æˆ·æ•°æ®
- âœ… **é«˜æˆåŠŸç‡**: æœ€ç»ˆæˆåŠŸç‡è¾¾ 99.9%

## ğŸ“ é¡¹ç›®ç»“æ„

```
tiktok_user_scrape/
â”œâ”€â”€ scripts/              # æ ¸å¿ƒè„šæœ¬
â”‚   â”œâ”€â”€ scrape_user_tikhub.py              # TikHub API å°è£…
â”‚   â”œâ”€â”€ batch_scrape_to_csv_concurrent.py  # æ‰¹é‡å¹¶å‘çˆ¬å–
â”‚   â”œâ”€â”€ retry_all_failed_users.py          # é‡è¯•å¤±è´¥ç”¨æˆ·
â”‚   â”œâ”€â”€ merge_csv_files.py                 # åˆå¹¶ CSV æ–‡ä»¶
â”‚   â”œâ”€â”€ monitor_progress_bar.py            # è¿›åº¦ç›‘æ§
â”‚   â””â”€â”€ utils/                             # è¾…åŠ©å·¥å…·
â”œâ”€â”€ data/                 # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ Nova 01 User list
â”‚   â”œâ”€â”€ Nova 02 User List
â”‚   â””â”€â”€ failed_users*.txt
â”œâ”€â”€ output/              # è¾“å‡ºç»“æœ
â”‚   â”œâ”€â”€ nova01_users.csv
â”‚   â”œâ”€â”€ nova02_users.csv
â”‚   â””â”€â”€ merged_all_users.csv
â”œâ”€â”€ logs/                # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ archive/             # å†å²ç‰ˆæœ¬
â”œâ”€â”€ config.py            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt     # ä¾èµ–åŒ…
â””â”€â”€ README.md           # é¡¹ç›®æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½® API Token

ç¼–è¾‘ `config.py` æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ TikHub API Tokenï¼š

```python
API_TOKEN = "your_api_token_here"
API_BASE_URL = "https://api.tikhub.io"
CONCURRENCY = 10  # å¹¶å‘æ•°
```

### 3. å‡†å¤‡ç”¨æˆ·åˆ—è¡¨

åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ¯è¡Œä¸€ä¸ª TikTok ç”¨æˆ· URLï¼š

```
https://www.tiktok.com/@username1
https://www.tiktok.com/@username2
https://www.tiktok.com/@username3
```

### 4. å¼€å§‹çˆ¬å–

```bash
# ä¿®æ”¹è„šæœ¬ä¸­çš„è·¯å¾„é…ç½®
python3 scripts/batch_scrape_to_csv_concurrent.py
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### æ‰¹é‡çˆ¬å–ç”¨æˆ·

```python
from scripts.scrape_user_tikhub import TikHubUserScraper

# åˆ›å»ºçˆ¬è™«å®ä¾‹
scraper = TikHubUserScraper(
    api_token="your_token",
    base_url="https://api.tikhub.io"
)

# è·å–å•ä¸ªç”¨æˆ·
result = await scraper.fetch_user_profile(unique_id="username")
```

### é‡è¯•å¤±è´¥ç”¨æˆ·

```bash
python3 scripts/retry_all_failed_users.py
```

### åˆå¹¶å¤šä¸ª CSV

```bash
python3 scripts/merge_csv_files.py
```

### ç›‘æ§çˆ¬å–è¿›åº¦

```bash
python3 scripts/monitor_progress_bar.py
```

## ğŸ“Š æ•°æ®å­—æ®µ

è¾“å‡º CSV åŒ…å« 21 ä¸ªå­—æ®µï¼š

| å­—æ®µ | è¯´æ˜ |
|------|------|
| username | ç”¨æˆ·å |
| unique_id | å”¯ä¸€ ID |
| nickname | æ˜µç§° |
| uid | ç”¨æˆ· ID |
| sec_uid | å®‰å…¨ ID |
| signature | ä¸ªäººç®€ä»‹ |
| follower_count | ç²‰ä¸æ•° |
| following_count | å…³æ³¨æ•° |
| total_favorited | è·èµæ€»æ•° |
| aweme_count | ä½œå“æ•° |
| visible_videos_count | å¯è§è§†é¢‘æ•° |
| verification_type | è®¤è¯ç±»å‹ |
| verified | æ˜¯å¦è®¤è¯ |
| bio_email | é‚®ç®± |
| category | åˆ†ç±» |
| account_type | è´¦å·ç±»å‹ |
| avatar_larger_url | å¤´åƒ URL |
| profile_url | ä¸»é¡µ URL |
| scrape_time | çˆ¬å–æ—¶é—´ |
| scrape_status | çˆ¬å–çŠ¶æ€ |
| error_message | é”™è¯¯ä¿¡æ¯ |

## ğŸ¯ é¡¹ç›®æˆæœ

æœ¬é¡¹ç›®æˆåŠŸçˆ¬å–ï¼š

- **æ€»ç”¨æˆ·æ•°**: 9,490 ä¸ªå”¯ä¸€ç”¨æˆ·
- **æˆåŠŸç‡**: 99.9%
- **Nova 01**: 5,335/5,339 (99.9%)
- **Nova 02**: 4,172/4,177 (99.9%)
- **åˆå¹¶æ•°æ®**: 9,481 æˆåŠŸï¼Œ9 å¤±è´¥

## âš™ï¸ é…ç½®è¯´æ˜

### å¹¶å‘æ•°è°ƒä¼˜

- **æ¨èå€¼**: 10 (å¹³è¡¡é€Ÿåº¦å’Œç¨³å®šæ€§)
- **ä¿å®ˆå€¼**: 5 (æ›´ç¨³å®šï¼Œé€Ÿåº¦è¾ƒæ…¢)
- **æ¿€è¿›å€¼**: 15-19 (å¯èƒ½è§¦å‘é™æµ)

### API é™åˆ¶

- QPS é™åˆ¶ï¼šæ ¹æ®å¥—é¤ä¸åŒ (10-20 è¯·æ±‚/ç§’)
- å»ºè®®å¹¶å‘æ•°ä¸è¶…è¿‡ QPS é™åˆ¶

## ğŸ”§ æ•…éšœæ’é™¤

### 429 é”™è¯¯ (Too Many Requests)

**é—®é¢˜**: è¯·æ±‚è¿‡å¿«è§¦å‘é™æµ

**è§£å†³**: é™ä½å¹¶å‘æ•° (CONCURRENCY)

### è¿æ¥è¶…æ—¶

**é—®é¢˜**: ç½‘ç»œä¸ç¨³å®š

**è§£å†³**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. å¢åŠ è¶…æ—¶æ—¶é—´ (timeout=60.0)
3. ä½¿ç”¨ä»£ç†

### éƒ¨åˆ†ç”¨æˆ·å¤±è´¥

**é—®é¢˜**: è´¦å·å·²åˆ é™¤/ç§å¯†/ä¸å­˜åœ¨

**è§£å†³**: è¿è¡Œé‡è¯•è„šæœ¬ï¼Œä»ç„¶å¤±è´¥çš„è´¦å·å¯å¿½ç•¥

## ğŸ“ å¼€å‘æ—¥å¿—

- **2025-10-14**: åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°åŸºç¡€çˆ¬å–åŠŸèƒ½
- **2025-10-14**: ä¼˜åŒ–å¹¶å‘æ€§èƒ½ï¼Œé€Ÿåº¦æå‡ 10 å€
- **2025-10-14**: æ·»åŠ é‡è¯•æœºåˆ¶ï¼ŒæˆåŠŸç‡æå‡è‡³ 99.9%
- **2025-10-14**: å®ç°æ•°æ®åˆå¹¶å’Œå»é‡åŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚ä½¿ç”¨æ—¶è¯·éµå®ˆï¼š

1. TikTok æœåŠ¡æ¡æ¬¾
2. TikHub API ä½¿ç”¨åè®®
3. ç›¸å…³æ³•å¾‹æ³•è§„

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issueã€‚

---

**æ³¨æ„**: è¯·åˆç†ä½¿ç”¨ APIï¼Œé¿å…è¿‡åº¦è¯·æ±‚ã€‚çˆ¬å–çš„æ•°æ®ä»…ä¾›ä¸ªäººç ”ç©¶ä½¿ç”¨ã€‚
